#!/bin/bash

# Set the path to the log file
log_file="/home/yatin/.ZAP/zap.log"

# Set the initial position in the file
last_position=$(wc -c < "$log_file")

# Get the hostname
hostname=$(hostname)

# Function to monitor the ZAP log file
monitor_log() {
    while inotifywait -e modify "$log_file"; do
        # Get the new position in the file
        new_position=$(wc -c < "$log_file")

        # Calculate the difference in position
        diff=$(($new_position - $last_position))

        # If there's new content in the file
        if [ $diff -gt 0 ]; then
            # Extract the new content
            tail -c +$(($last_position + 1)) "$log_file" | while IFS= read -r line; do
                echo "Line: $line"
            done

            # Update the last position
            last_position=$new_position
        fi
    done
}

# Check if a website URL is provided as an argument
if [ -z "$1" ]; then
    echo "Please provide a website URL as an argument."
    exit 1
fi

# Set the website URL from the command-line argument
website_url="$1"

# Start ZAP attack on the specified website
zap_report="/home/yatin/Documents/projects/ECS/report.html"

# Set the path where you want to save the report
/usr/local/bin/zap.sh -quickurl "$website_url" -quickout "$zap_report" 

# Monitor ZAP log file

